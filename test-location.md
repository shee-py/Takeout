# å®šä½åŠŸèƒ½æµ‹è¯•è¯´æ˜

## å¿«é€Ÿå¼€å§‹

### 1. ä¸´æ—¶æµ‹è¯•ï¼ˆæ— éœ€APIå¯†é’¥ï¼‰
å¦‚æœä½ æƒ³å…ˆæµ‹è¯•åŸºæœ¬åŠŸèƒ½ï¼Œå¯ä»¥æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼š

åœ¨ `pages/index/index.js` ä¸­ä¸´æ—¶æ›¿æ¢ `getAddressFromLocation` æ–¹æ³•ï¼š

```javascript
// ä¸´æ—¶æµ‹è¯•ç”¨çš„æ¨¡æ‹Ÿåœ°å€è§£æ
getAddressFromLocation(latitude, longitude) {
  setTimeout(() => {
    // æ ¹æ®ç»çº¬åº¦æ¨¡æ‹Ÿåœ°å€
    let address = 'åå—å†œä¸šå¤§å­¦';
    let shortAddress = 'åå†œ';
    
    // åå†œé™„è¿‘
    if (latitude > 23.15 && latitude < 23.17 && longitude > 113.35 && longitude < 113.37) {
      address = 'åå—å†œä¸šå¤§å­¦';
      shortAddress = 'åå†œ';
    } 
    // å¤©æ²³åŒº
    else if (latitude > 23.1 && latitude < 23.2 && longitude > 113.3 && longitude < 113.4) {
      address = 'å¹¿å·å¸‚å¤©æ²³åŒº';
      shortAddress = 'å¤©æ²³åŒº';
    }
    // å¹¿å·å¸‚
    else if (latitude > 23.0 && latitude < 23.3 && longitude > 113.2 && longitude < 113.5) {
      address = 'å¹¿å·å¸‚';
      shortAddress = 'å¹¿å·';
    }
    // å…¶ä»–ä½ç½®
    else {
      address = `${latitude.toFixed(4)}, ${longitude.toFixed(4)}`;
      shortAddress = 'å·²å®šä½';
    }
    
    this.setData({
      'location.address': shortAddress,
      'location.fullAddress': address
    });
    
    wx.showToast({
      title: 'å®šä½æˆåŠŸ',
      icon: 'success'
    });
  }, 1000);
}
```

### 2. æ­£å¼ä½¿ç”¨ï¼ˆéœ€è¦APIå¯†é’¥ï¼‰

#### æ­¥éª¤1ï¼šç”³è¯·è…¾è®¯åœ°å›¾APIå¯†é’¥
1. è®¿é—® [è…¾è®¯åœ°å›¾å¼€æ”¾å¹³å°](https://lbs.qq.com/)
2. æ³¨å†Œè´¦å·å¹¶å®Œæˆå®åè®¤è¯
3. åˆ›å»ºåº”ç”¨ï¼Œé€‰æ‹©"å¾®ä¿¡å°ç¨‹åº"ç±»å‹
4. ç”³è¯·"é€†åœ°ç†ç¼–ç "æœåŠ¡
5. è·å–APIå¯†é’¥

#### æ­¥éª¤2ï¼šé…ç½®å¯†é’¥
ç¼–è¾‘ `config/api.js` æ–‡ä»¶ï¼š
```javascript
const config = {
  TENCENT_MAP_KEY: 'ä½ çš„å®é™…APIå¯†é’¥', // æ›¿æ¢è¿™é‡Œ
  // ... å…¶ä»–é…ç½®ä¿æŒä¸å˜
};
```

#### æ­¥éª¤3ï¼šé…ç½®å°ç¨‹åºåå°
åœ¨å¾®ä¿¡å°ç¨‹åºåå°æ·»åŠ æœåŠ¡å™¨åŸŸåï¼š
- `https://apis.map.qq.com`

## æµ‹è¯•æµç¨‹

### 1. åŸºç¡€æµ‹è¯•
1. æ‰“å¼€å°ç¨‹åº
2. ç‚¹å‡»é¡¶éƒ¨çš„å®šä½æŒ‰é’®ï¼ˆé‡æ–°å®šä½å›¾æ ‡ï¼‰
3. æˆæƒå®šä½æƒé™
4. è§‚å¯Ÿåœ°å€æ˜¾ç¤ºå˜åŒ–ï¼š
   - ç‚¹å‡»å‰ï¼šæ˜¾ç¤º"æœªå®šä½"
   - ç‚¹å‡»åï¼šæ˜¾ç¤º"å®šä½ä¸­..."
   - å®šä½æˆåŠŸï¼šæ˜¾ç¤ºå…·ä½“åœ°å€

### 2. åŠŸèƒ½éªŒè¯
- **æƒé™å¤„ç†**ï¼šé¦–æ¬¡ä½¿ç”¨ä¼šå¼¹å‡ºæˆæƒè¯·æ±‚
- **é”™è¯¯å¤„ç†**ï¼šæ‹’ç»æˆæƒä¼šå¼•å¯¼ç”¨æˆ·å»è®¾ç½®
- **åœ°å€è§£æ**ï¼šæˆåŠŸåæ˜¾ç¤ºå…·ä½“ä½ç½®ä¿¡æ¯
- **ç”¨æˆ·ä½“éªŒ**ï¼šæœ‰åŠ è½½æç¤ºå’ŒæˆåŠŸæç¤º

### 3. è°ƒè¯•ä¿¡æ¯
æ‰“å¼€å¼€å‘è€…å·¥å…·æ§åˆ¶å°ï¼ŒæŸ¥çœ‹ä»¥ä¸‹æ—¥å¿—ï¼š
- `å®šä½ä¿¡æ¯:` - æ˜¾ç¤ºè·å–åˆ°çš„ç»çº¬åº¦
- `åœ°å€è§£æç»“æœ:` - æ˜¾ç¤ºAPIè¿”å›çš„è¯¦ç»†ä¿¡æ¯

## é¢„æœŸæ•ˆæœ

### åœ°å€æ˜¾ç¤ºä¼˜å…ˆçº§
1. **POIåç§°**ï¼šå¦‚"åå—å†œä¸šå¤§å­¦"ã€"å¤©æ²³åŸ"
2. **æ¨èåœ°å€**ï¼šå¦‚"äº”å±±è·¯483å·åå—å†œä¸šå¤§å­¦"
3. **ç²—ç•¥åœ°å€**ï¼šå¦‚"åå—å†œä¸šå¤§å­¦é™„è¿‘"
4. **åŒºåŸŸåœ°å€**ï¼šå¦‚"å¤©æ²³åŒºäº”å±±è·¯"

### ç•Œé¢æ˜¾ç¤º
- å®šä½å‰ï¼š`ğŸ—ºï¸ æœªå®šä½`
- å®šä½ä¸­ï¼š`ğŸ—ºï¸ å®šä½ä¸­...`
- å®šä½åï¼š`ğŸ—ºï¸ åå—å†œä¸šå¤§å­¦`

## å¸¸è§é—®é¢˜

### 1. å®šä½å¤±è´¥
- æ£€æŸ¥æ‰‹æœºGPSæ˜¯å¦å¼€å¯
- ç¡®è®¤å·²æˆæƒå®šä½æƒé™
- åœ¨çœŸæœºä¸Šæµ‹è¯•ï¼ˆå¼€å‘è€…å·¥å…·å®šä½ä¸å‡†ç¡®ï¼‰

### 2. åœ°å€è§£æå¤±è´¥
- æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æœåŠ¡å™¨åŸŸåå·²é…ç½®
- æŸ¥çœ‹ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### 3. æ˜¾ç¤º"å®šä½æˆåŠŸ"è€Œéå…·ä½“åœ°å€
- è¿™æ˜¯å¤‡ç”¨æ˜¾ç¤ºï¼Œè¡¨ç¤ºå®šä½æˆåŠŸä½†åœ°å€è§£æå¤±è´¥
- æ£€æŸ¥APIé…ç½®å’Œç½‘ç»œè¿æ¥

## è¿›é˜¶åŠŸèƒ½

### 1. æ·»åŠ é•¿æŒ‰æ˜¾ç¤ºå®Œæ•´åœ°å€
åœ¨ `index.wxml` ä¸­ï¼š
```xml
<view class="location" bindtap="getLocation" bindlongpress="showFullAddress">
  <image src="/images/Repositioning (é‡æ–°å®šä½).png" class="location-icon"></image>
  <text>{{location ? location.address : 'æœªå®šä½'}}</text>
</view>
```

åœ¨ `index.js` ä¸­æ·»åŠ ï¼š
```javascript
showFullAddress() {
  if (this.data.location && this.data.location.fullAddress) {
    wx.showModal({
      title: 'å®Œæ•´åœ°å€',
      content: this.data.location.fullAddress,
      showCancel: false
    });
  }
}
```

### 2. è‡ªåŠ¨å®šä½
åœ¨ `onLoad` ä¸­æ·»åŠ ï¼š
```javascript
onLoad() {
  // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨å®šä½
  this.getLocation();
}
```

è¿™æ ·å°±å®Œæˆäº†ç²¾ç¡®çš„åœ°å€è§£æåŠŸèƒ½ï¼ 